<!DOCTYPE html>
<html>
<head>
  <title>News</title>
  <meta charset="utf-8">
  <link href="glassfox.css" rel="stylesheet">
  <link href="ar.css" rel="stylesheet">
  <script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.2.19/angular.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/angular-ui-router/0.2.10/angular-ui-router.js"></script>
  <script src="angular-routing.js"></script>
</head>

<body ng-app="News" id="page">
  <ui-view></ui-view>

  <script type="text/ng-template" id="/home.html">
    <div class="floatBox">
      <h1>News</h1>

      <div ng-repeat="post in posts | orderBy:'-upvotes'">
        <div class="post">
          <img src="img/tup.png" ng-click="incrementUpvotes(post)" />
          <h4>{{post.upvotes}}</h4>
          {{post.title}}
          <a href="#/posts/{{posts.indexOf(post)}}">Comments</a>
          <p>{{post.body}}</p>
        </div>
      </div><hr>

      <h3>Add a new post</h3>
      <form ng-submit="addPost()">
        <input type="text" placeholder="Title" ng-model="formContent"></input><br>
        <textarea placeholder="Content" ng-model="formBody"></textarea><br>
        <button type="submit">Post</button>
      </form>

    </div>
  </script>

  <script type="text/ng-template" id="/posts.html">
    <div class="floatBox">
      <div class="news">
        <h2>{{post.title}}</h2>
        {{post.body}}
      </div>

      <div ng-repeat="comment in post.comments | orderBy:'-upvotes'">
        <div class="post">
          <img src="img/tup.png" ng-click="incrementUpvotes(comment)" />
          <h4>{{comment.upvotes}}</h4>
          {{comment.body}}
        </div>
      </div><hr>

      <h3>Add a new comment</h3>
      <form ng-submit="addComment()">
        <input type="text" placeholder="Comment" ng-model="body" placeholder="Comment"></input><br>
        <button type="submit">Post</button>
      </form>
    </div>
  </script>

</body>
</html>
